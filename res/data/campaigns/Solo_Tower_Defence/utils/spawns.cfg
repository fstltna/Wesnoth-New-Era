#define SPAWN X Y THE_UNIT THE_TURN THE_BONUS
	[event]
		name=turn {THE_TURN}
		[unit]
			type={THE_UNIT}
			side=2
			x,y={X},{Y}
			goto_x,goto_y=11,4
			user_description="Enemy"
		[/unit]
		[object]
			silent=yes
			[filter]
				x,y={X},{Y}
			[/filter]
			[effect]
				apply_to=remove_attacks
				range=ranged
			[/effect]
			[effect]
				apply_to=remove_attacks
				range=melee
			[/effect]
			[effect]
				apply_to=hitpoints
				increase_total={THE_BONUS}
				heal_full=yes
			[/effect]
			[effect]
				apply_to=new_ability
				[abilities]
					{ABILITY_SKIRMISHER}
				[/abilities]
			[/effect]
		[/object]
	[/event]
#enddef
#define SPAWN_BOSS X Y THE_UNIT THE_TURN THE_BONUS
	[event]
		name=turn {THE_TURN}
		[unit]
			type={THE_UNIT}
			side=2
			x,y={X},{Y}
			goto_x,goto_y=11,4
			user_description="Boss"
		[/unit]
		[object]
			silent=yes
			[filter]
				x,y={X},{Y}
			[/filter]
			[effect]
				apply_to=remove_attacks
				range=ranged
			[/effect]
			[effect]
				apply_to=remove_attacks
				range=melee
			[/effect]
			[effect]
				apply_to=hitpoints
				increase_total={THE_BONUS}
				heal_full=yes
			[/effect]
			[effect]
				apply_to=new_ability
				[abilities]
					{ABILITY_SKIRMISHER}
				[/abilities]
			[/effect]
		[/object]
	[/event]
#enddef
#define MOVE_EACH_UNIT
	[event]
		name=ai turn
		first_time_only=no
		[filter]
			side=2,4,6,8
		[/filter]
		[store_unit]
			[filter]
				side=2,4,6,8
				canrecruit=no
			[/filter]
			variable=unit_array
			kill=no
		[/store_unit]
		{FOREACH unit_array u}
			[if]
				[variable]
					name=unit_array[$u].unit.moves
					greater_than=0
				[/variable]
				[then]
					[set_variable]
						name=unit_array[$u].unit.goto_x
						value=11
					[/set_variable]
					[set_variable]
						name=unit_array[$u].unit.goto_y
						value=4
					[/set_variable]
				[/then]
			[/if]
		{NEXT u}
	[/event]
#enddef
#define BONUS REWARD REWARD_TURN
	[event]
		name=turn {REWARD_TURN}
		[gold]
			side=1
			amount={REWARD}
		[/gold]
		[sound]
			name=gold.ogg
		[/sound]
		[message]
			speaker=narrator
			message="You got a gold bonus! You earned $REWARD gold!"
		[/message]
	[/event]
#enddef
#define GAME_WON
	[event]
		name=turn 130
		[kill]
			x,y=27,25
			animate=yes
		[/kill]
		[sound]
			name=fanfare-short.wav
		[/sound]
		[endlevel]
			result=victory
		[/endlevel]
	[/event]
#enddef
#define GAME_LOST
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x,y=11,4
		[/filter]
		[if]
			[variable]
				name=dp
				less_than_equal_to=0
			[/variable]
			[then]
				[sound]
					name=dwarf-laugh.wav
				[/sound]
				[music]
					name=the_king_is_dead.ogg
					immediate=yes
				[/music]
				[endlevel]
					result=defeat
				[/endlevel]
			[/then]
		[/if]
	[/event]
#enddef
#define UNIT_LOST
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x,y=11,4
		[/filter]
		[sound]
			name=fist.ogg
		[/sound]
		[set_variable]
			name=dp
			add=-1
		[/set_variable]
		[kill]
			x,y=11,4
			animate=yes
		[/kill]
		[label]
			x,y=27,49
			text="Defence Points Remaining: $dp"
		[/label]
	[/event]
#enddef
